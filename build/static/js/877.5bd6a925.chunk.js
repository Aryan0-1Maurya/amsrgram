"use strict";(self.webpackChunksocial_media_app=self.webpackChunksocial_media_app||[]).push([[877,596],{8877:function(e,t,n){n.r(t),n.d(t,{default:function(){return x}});n(2791);var r=n(2508),a=n(1413),s=n(1134),i=n(438),o=n(184),u=function(e){var t=e.post,n=e.commentsMenu,u=(0,i.aC)(),c=u.user,l=u.isLoading,d=(0,r.uK)({postID:null===t||void 0===t?void 0:t.id,uid:null===c||void 0===c?void 0:c.id}).addComment,f=(0,s.cI)(),p=f.register,m=f.handleSubmit,x=f.reset;return l?null:(0,o.jsx)("form",{onSubmit:m((function(e){return function(e){d(e.text),x()}(e)})),children:(0,o.jsxs)("div",{className:"".concat(n?"opacity-100":"opacity-0"," w-full flex justify-between items-center delay-300 duration-300 ease-in-out"),children:[(0,o.jsxs)("div",{className:"w-3/4 flex justify-start items-center gap-4",children:[(0,o.jsx)("img",{src:null===c||void 0===c?void 0:c.avatar,alt:"",className:"bg-black w-10 h-10 rounded-full object-cover"}),(0,o.jsx)("input",(0,a.Z)((0,a.Z)({type:"text"},p("text",{required:!0})),{},{autoComplete:"off",placeholder:"Write a comment",className:"w-3/4 bg-black border-b border-neutral-700 outline-none py-1"}))]}),(0,o.jsx)("button",{type:"submit",title:"Post",className:"bg-black w-1/4 p-2 text-sm text-center font-semibold rounded-xl border-2 border-orange-600 text-orange-600 hover:opacity-50 duration-300 ease-in-out",children:"Add"})]})})},c=n(1087),l=n(5939),d=n(5763),f=n(3108),p=function(e){var t=e.comment,n=(0,f.aF)(null===t||void 0===t?void 0:t.uid),a=n.user,s=n.isLoading,u=(0,i.aC)(),p=u.user,m=u.isLoading,x=(0,r.X0)(null===t||void 0===t?void 0:t.id).deleteComment;return s?null:(0,o.jsxs)("div",{className:"w-full flex flex-col gap-4",children:[(0,o.jsx)("div",{className:"flex",children:(0,o.jsxs)(c.rU,{to:"/profile/".concat(a.id),title:"See Profile",className:"flex gap-2 cursor-pointer hover:opacity-50 duration-300 ease-in-out",children:[(0,o.jsx)("img",{src:a.avatar,alt:"",className:"w-10 h-10 bg-black rounded-full object-cover"}),(0,o.jsxs)("div",{className:"flex flex-col",children:[(0,o.jsx)("div",{className:"tracking-wider font-semibold capitalize text-orange-600",children:a.username}),(0,o.jsxs)("div",{className:"opacity-50 text-xs",children:[(0,l.Z)(t.date)," ago"]})]})]})}),(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[(0,o.jsx)("div",{className:"text-base font-medium h-auto",children:t.text}),!m&&(null===p||void 0===p?void 0:p.id)===t.uid&&(0,o.jsx)(d.MSG,{size:18,onClick:x,title:"Delete Comment",className:"cursor-pointer hover:text-orange-600 duration-300 ease-in-out"})]})]})},m=function(e){var t=e.post,n=e.commentsMenu,a=(0,r.MD)(null===t||void 0===t?void 0:t.id),s=a.comments;return a.isLoading?null:(0,o.jsxs)("div",{className:"h-full flex flex-col justify-between gap-2",children:[(0,o.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,o.jsx)("div",{className:"".concat(n?"opacity-100":"opacity-0"," text-xl text-center tracking-wider font-semibold text-orange-600 delay-[200ms] duration-300 ease-in-out"),children:"Comments"}),0===s.length?(0,o.jsx)("div",{className:"".concat(n?"opacity-100":"opacity-0"," text-center text-sm font-semibold -mt-4 delay-[250ms] duration-300 ease-in-out"),children:"There are no comments yet!"}):(0,o.jsx)("div",{className:"".concat(n?"opacity-100":"opacity-0"," h-80 flex flex-col justify-start items-center gap-8 overflow-x-auto delay-[250ms] duration-300 ease-in-out"),children:null===s||void 0===s?void 0:s.map((function(e){return(0,o.jsx)("div",{className:"w-full flex flex-col justify-center",comment:e,children:(0,o.jsx)(p,{comment:e})},e.id)}))})]}),(0,o.jsx)(u,{post:t,commentsMenu:n})]})},x=function(e){var t=e.post,n=e.commentsMenu,r=e.setCommentsMenu;return(0,o.jsx)("div",{onClick:function(){return r(!1)},className:"".concat(n?"h-full":"h-0 delay-[250ms]"," bg-modal fixed top-0 left-0 w-full flex justify-center items-end z-50"),children:(0,o.jsxs)("div",{onClick:function(e){return e.stopPropagation()},className:"".concat(n?"h-2/3 opacity-100":"h-0 opacity-0"," bg-black text-white w-full max-w-[500px] px-4 py-8 rounded-tl-3xl rounded-tr-3xl flex flex-col justify-start gap-8 overflow-hidden duration-300 ease-in-out z-50"),children:[(0,o.jsx)("div",{className:"".concat(n?"opacity-100":"opacity-0"," w-full flex justify-center items-center delay-150 duration-300 ease-in-out"),children:(0,o.jsx)("div",{title:"CLose Menu",onTouchStart:function(){return r(!1)},onMouseDown:function(){return r(!1)},className:"w-1/4 h-2 bg-white rounded-full cursor-pointer hover:opacity-50 duration-300 ease-in-out"})}),(0,o.jsx)(m,{post:t,commentsMenu:n})]})})}},438:function(e,t,n){n.d(t,{aC:function(){return m},f0:function(){return x},aU:function(){return h},mr:function(){return v}});var r=n(4165),a=n(5861),s=n(9439),i=n(2791),o=n(7689),u=n(4098),c=n(5063),l=n(2481),d=n(6910);function f(e){return p.apply(this,arguments)}function p(){return(p=(0,a.Z)((0,r.Z)().mark((function e(t){var n,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,l.IO)((0,l.hJ)(c.db,"users"),(0,l.ar)("username","==",t)),e.next=3,(0,l.PL)(n);case 3:return a=e.sent,e.abrupt("return",a.size>0);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(){var e=(0,d.F_)(c.I8),t=(0,s.Z)(e,3),n=t[0],o=t[1],u=t[2],f=(0,i.useState)(!0),p=(0,s.Z)(f,2),m=p[0],x=p[1],v=(0,i.useState)(null),h=(0,s.Z)(v,2),b=h[0],y=h[1];return(0,i.useEffect)((function(){function e(){return(e=(0,a.Z)((0,r.Z)().mark((function e(){var t,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),t=(0,l.JU)(c.db,"users",n.uid),e.next=4,(0,l.QT)(t);case 4:a=e.sent,y(a.data()),x(!1);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}o||(n?function(){e.apply(this,arguments)}():x(!1))}),[o,n]),{user:b,isLoading:m,error:u}}function x(){var e=(0,i.useState)(!1),t=(0,s.Z)(e,2),n=t[0],l=t[1],d=(0,i.useState)(""),f=(0,s.Z)(d,2),p=f[0],m=f[1],x=(0,o.s0)();function v(){return(v=(0,a.Z)((0,r.Z)().mark((function e(t){var n,a,s,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.email,a=t.password,s=t.redirectTo,i=void 0===s?"/":s,l(!0),m(""),e.prev=3,e.next=6,(0,u.e5)(c.I8,n,a);case 6:x(i),e.next=14;break;case 9:return e.prev=9,e.t0=e.catch(3),m(e.t0.message),l(!1),e.abrupt("return",!1);case 14:return m(""),l(!1),e.abrupt("return",!0);case 17:case"end":return e.stop()}}),e,null,[[3,9]])})))).apply(this,arguments)}return{login:function(e){return v.apply(this,arguments)},isLoading:n,error:p}}function v(){var e=(0,i.useState)(!1),t=(0,s.Z)(e,2),n=t[0],d=t[1],p=(0,i.useState)(""),m=(0,s.Z)(p,2),x=m[0],v=m[1],h=(0,o.s0)();function b(){return(b=(0,a.Z)((0,r.Z)().mark((function e(t){var n,a,s,i,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,a=t.email,s=t.password,i=t.redirectTo,void 0===i?"/":i,d(!0),e.next=4,f(n);case 4:if(!e.sent){e.next=10;break}v("Username already exists"),d(!1),e.next=25;break;case 10:return e.prev=10,e.next=13,(0,u.Xb)(c.I8,a,s);case 13:return o=e.sent,e.next=16,(0,l.pl)((0,l.JU)(c.db,"users",o.user.uid),{id:o.user.uid,username:n,avatar:"",date:Date.now()});case 16:h("/"),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(10),v("Signed up failed");case 22:return e.prev=22,d(!1),e.finish(22);case 25:case"end":return e.stop()}}),e,null,[[10,19,22,25]])})))).apply(this,arguments)}return{register:function(e){return b.apply(this,arguments)},isLoading:n,error:x}}function h(){var e=(0,d.QJ)(c.I8),t=(0,s.Z)(e,3),n=t[0],i=t[1],u=(t[2],(0,o.s0)());function l(){return(l=(0,a.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n();case 2:if(!e.sent){e.next=4;break}u("/signin");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return{logout:function(){return l.apply(this,arguments)},isLoading:i}}},3108:function(e,t,n){n.d(t,{MB:function(){return m},UV:function(){return p},aF:function(){return f}});var r=n(4165),a=n(5861),s=n(9439),i=n(2791),o=n(5063),u=n(2481),c=n(2146),l=n(276),d=n(7689);function f(e){var t=(0,u.IO)((0,u.JU)(o.db,"users",e)),n=(0,c.Xi)(t),r=(0,s.Z)(n,2);return{user:r[0],isLoading:r[1]}}function p(){var e=(0,c.d4)((0,u.hJ)(o.db,"users")),t=(0,s.Z)(e,2);return{users:t[0],isLoading:t[1]}}function m(e){var t=(0,i.useState)(!1),n=(0,s.Z)(t,2),c=(n[0],n[1]),f=(0,i.useState)(null),p=(0,s.Z)(f,2),m=p[0],x=p[1],v=(0,d.s0)();function h(){return(h=(0,a.Z)((0,r.Z)().mark((function t(){var n,a,s;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(m){t.next=2;break}return t.abrupt("return");case 2:return c(!0),n=(0,l.iH)(o.tO,"avatars/"+e),t.next=6,(0,l.KV)(n,m);case 6:return t.next=8,(0,l.Jt)(n);case 8:return a=t.sent,s=(0,u.JU)(o.db,"users",e),t.next=12,(0,u.r7)(s,{avatar:a});case 12:c(!1),v(0);case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return{file:m,setFile:x,updateAvatar:function(){return h.apply(this,arguments)}}}}}]);
//# sourceMappingURL=877.5bd6a925.chunk.js.map