"use strict";(self.webpackChunksocial_media_app=self.webpackChunksocial_media_app||[]).push([[303],{6303:function(e,t,n){n.r(t);var i=n(9439),s=n(2791),r=n(4373),o=n(6856),a=n(8318),l=n(2508),c=n(184),u=(0,s.lazy)((function(){return Promise.all([n.e(910),n.e(134),n.e(763),n.e(939),n.e(877)]).then(n.bind(n,8877))}));t.default=function(e){var t=e.post,n=e.user,d=(0,s.useState)(!1),m=(0,i.Z)(d,2),f=m[0],x=m[1],h=t.likes.includes(null===n||void 0===n?void 0:n.id),p=(0,a.q0)({id:t.id,isLiked:h,uid:null===n||void 0===n?void 0:n.id}).toggleLike,v=(0,l.MD)(t.id).comments,j=(0,s.useState)(!1),g=(0,i.Z)(j,2),k=g[0],w=g[1];return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"".concat(f?"w-full h-full":"w-full xxxs:w-[48%] xxs:w-[30%] h-48 xxxs:h-40 xxs:h-44"," rounded-xl flex flex-col gap-2 duration-300 ease-in-out"),children:[f?(0,c.jsx)("img",{src:t.picture,title:"Close Post",onClick:function(){return x(!f)},alt:"",className:"w-full h-full object-cover cursor-pointer rounded-xl hover:opacity-80 duration-300 ease-in-out"}):(0,c.jsx)("img",{src:t.picture,title:"Open Post",onClick:function(){return x(!f)},alt:"",className:"w-full h-full object-cover cursor-pointer rounded-xl hover:opacity-80 duration-300 ease-in-out"}),f?(0,c.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,c.jsx)("div",{className:"font-medium h-auto",children:t.text}),(0,c.jsxs)("div",{className:"flex justify-start items-center gap-4",children:[n?(0,c.jsx)(c.Fragment,{children:h?(0,c.jsxs)("div",{title:"Unlike",onClick:p,className:"flex justify-center items-center gap-2 cursor-pointer text-orange-600 hover:opacity-50 duration-300 ease-in-out",children:[(0,c.jsx)(r.$g3,{size:26}),(0,c.jsx)("div",{className:"font-medium",children:t.likes.length})]}):(0,c.jsxs)("div",{title:"Like",onClick:p,className:"flex justify-center items-center gap-2 cursor-pointer hover:text-orange-600 duration-300 ease-in-out",children:[(0,c.jsx)(r.AWH,{size:26}),(0,c.jsx)("div",{className:"font-medium",children:t.likes.length})]})}):(0,c.jsxs)("div",{title:"Like",onClick:function(){return alert("Please sign in to be able to like")},className:"flex justify-center items-center gap-2 cursor-pointer hover:text-orange-600 duration-300 ease-in-out",children:[(0,c.jsx)(r.AWH,{size:26}),(0,c.jsx)("div",{className:"font-medium",children:t.likes.length})]}),n?(0,c.jsxs)("div",{title:"Comments",onClick:function(){return w(!0)},className:"flex justify-center items-center gap-2 cursor-pointer hover:text-orange-600 duration-300 ease-in-out",children:[(0,c.jsx)(o.VRI,{size:22}),(0,c.jsx)("div",{className:"font-medium",children:null===v||void 0===v?void 0:v.length})]}):(0,c.jsxs)("div",{title:"Comments",onClick:function(){return alert("Please sign in to be able to comment")},className:"flex justify-center items-center gap-2 cursor-pointer hover:text-orange-600 duration-300 ease-in-out",children:[(0,c.jsx)(o.VRI,{size:22}),(0,c.jsx)("div",{className:"font-medium",children:null===v||void 0===v?void 0:v.length})]})]})]}):null]}),(0,c.jsx)(u,{post:t,commentsMenu:k,setCommentsMenu:w})]})}},2508:function(e,t,n){n.d(t,{MD:function(){return m},X0:function(){return f},uK:function(){return d}});var i=n(4165),s=n(5861),r=n(9439),o=n(2791),a=n(5063),l=n(2481),c=n(2146),u=n(5854);function d(e){var t=e.postID,n=e.uid,c=(0,o.useState)(!1),d=(0,r.Z)(c,2),m=d[0],f=d[1];function x(){return(x=(0,s.Z)((0,i.Z)().mark((function e(s){var r,o,c;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),r=(0,u.k$)(),o=Date.now(),c=(0,l.JU)(a.db,"comments",r),e.next=6,(0,l.pl)(c,{text:s,id:r,postID:t,date:o,uid:n});case 6:f(!1);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return{addComment:function(e){return x.apply(this,arguments)},isLoading:m}}function m(e){var t=(0,l.IO)((0,l.hJ)(a.db,"comments"),(0,l.ar)("postID","==",e),(0,l.Xo)("date","desc")),n=(0,c.d4)(t),i=(0,r.Z)(n,3),s=i[0],o=i[1],u=i[2];if(u)throw u;return{comments:s,isLoading:o}}function f(e){var t=(0,o.useState)(!1),n=(0,r.Z)(t,2),c=n[0],u=n[1];function d(){return(d=(0,s.Z)((0,i.Z)().mark((function t(){var n;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Are you sure you want to delete this comment?")){t.next=7;break}return u(!0),n=(0,l.JU)(a.db,"comments",e),t.next=6,(0,l.oe)(n);case 6:u(!1);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return{deleteComment:function(){return d.apply(this,arguments)},isLoading:c}}}}]);
//# sourceMappingURL=303.2991e404.chunk.js.map