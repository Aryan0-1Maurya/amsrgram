"use strict";(self.webpackChunksocial_media_app=self.webpackChunksocial_media_app||[]).push([[540],{1540:function(e,t,n){n.r(t);var r=n(9439),i=n(2791),s=n(1087),a=n(3441),o=n(5939),u=n(4373),c=n(6856),l=n(8617),d=n(438),f=n(2508),p=n(8318),m=n(3108),v=n(184),h=(0,i.lazy)((function(){return n.e(140).then(n.bind(n,6140))})),x=(0,i.lazy)((function(){return Promise.all([n.e(763),n.e(717)]).then(n.bind(n,9717))})),g=(0,i.lazy)((function(){return Promise.all([n.e(134),n.e(763),n.e(596)]).then(n.bind(n,8877))})),y=i.forwardRef((function(e,t){var n=e.post,y=(0,m.aF)(null===n||void 0===n?void 0:n.uid),w=y.user,b=y.isLoading,j=(0,d.aC)(),k=j.user,Z=j.isLoading,N=n.likes.includes(null===k||void 0===k?void 0:k.id),C=(0,p.q0)({id:n.id,isLiked:N,uid:null===k||void 0===k?void 0:k.id}).toggleLike,I=(0,p.ZL)(n.id).deletePost,V=(0,i.useState)(!1),S=(0,r.Z)(V,2),L=S[0],M=S[1],z=(0,i.useState)(!1),U=(0,r.Z)(z,2),O=U[0],P=U[1],J=(0,i.useState)(!1),D=(0,r.Z)(J,2),R=D[0],A=D[1],F=(0,f.MD)(n.id).comments,_=(0,i.useState)(!1),E=(0,r.Z)(_,2),H=E[0],X=E[1],B=(0,a.YD)(),T=B.ref,W=B.inView;return b||Z?null:(0,v.jsxs)("div",{ref:T,className:"".concat(W?"animate-animateOpacity":null," post w-full h-[17rem] flex flex-col justify-between gap-2"),children:[(0,v.jsxs)("div",{className:"w-full flex justify-between items-center gap-2",children:[(null===k||void 0===k?void 0:k.id)===(null===n||void 0===n?void 0:n.uid)?(0,v.jsxs)(s.rU,{to:"/profile",title:"Your Profile",className:"flex justify-left gap-2 cursor-pointer hover:opacity-50 duration-300 ease-in-out",children:[w.avatar?(0,v.jsx)("img",{src:w.avatar,alt:"",className:"w-10 h-10 shadow-sm shadow-gray-400 rounded-full object-cover"}):(0,v.jsx)("img",{src:w.avatar,alt:"",className:"w-10 h-10 bg-black shadow-sm shadow-gray-400 rounded-full object-cover"}),(0,v.jsxs)("div",{className:"flex flex-col",children:[(0,v.jsx)("div",{className:"tracking-wider font-semibold capitalize text-orange-600",children:w.username}),(0,v.jsxs)("div",{className:"opacity-50 text-xs",children:[(0,o.Z)(n.date)," ago"]})]})]}):(0,v.jsxs)(s.rU,{to:"/profile/".concat(w.id),title:"See Profile",className:"flex justify-left gap-2 cursor-pointer hover:opacity-50 duration-300 ease-in-out",children:[w.avatar?(0,v.jsx)("img",{src:w.avatar,alt:"",className:"w-10 h-10 shadow-sm shadow-gray-400 rounded-full object-cover"}):(0,v.jsx)("img",{src:w.avatar,alt:"",className:"w-10 h-10 bg-black shadow-sm shadow-gray-400 rounded-full object-cover"}),(0,v.jsxs)("div",{className:"flex flex-col",children:[(0,v.jsx)("div",{className:"tracking-wider font-semibold capitalize text-orange-600",children:w.username}),(0,v.jsxs)("div",{className:"opacity-50 text-xs",children:[(0,o.Z)(n.date)," ago"]})]})]}),(0,v.jsx)(l.Dxw,{size:22,onClick:function(){return A(!0)},className:"cursor-pointer hover:opacity-50 duration-300 ease-in-out"})]}),""===n.picture?null:(0,v.jsx)("img",{src:n.picture,title:"View Image",onClick:function(){return M(!0)},alt:"",className:"post-picture w-full h-[60%] object-cover cursor-pointer rounded-xl hover:opacity-80 duration-300 ease-in-out"}),O?(0,v.jsx)("div",{title:"Hide",onClick:function(){return P(!O)},className:"text-sm font-medium h-auto hover:opacity-50 cursor-pointer duration-300 ease-in-out",children:n.caption}):(0,v.jsx)(v.Fragment,{children:(null===n||void 0===n?void 0:n.caption.length)<=20?(0,v.jsx)("div",{className:"text-sm font-medium h-auto",children:n.caption}):(0,v.jsxs)("div",{title:"View",onClick:function(){return P(!O)},className:"text-sm font-medium h-auto hover:opacity-50 cursor-pointer duration-300 ease-in-out",children:[null===n||void 0===n?void 0:n.caption.slice(0,20),(null===n||void 0===n?void 0:n.caption.length)>20?" ...":null]})}),(0,v.jsxs)("div",{className:"flex justify-start items-center gap-4",children:[k?(0,v.jsx)(v.Fragment,{children:N?(0,v.jsxs)("div",{title:"Unlike",onClick:C,className:"flex justify-center items-center gap-2 cursor-pointer text-orange-600 hover:opacity-50 duration-300 ease-in-out",children:[(0,v.jsx)(u.$g3,{size:22}),(0,v.jsx)("div",{className:"text-sm font-medium",children:n.likes.length})]}):(0,v.jsxs)("div",{title:"Like",onClick:C,className:"flex justify-center items-center gap-2 cursor-pointer hover:text-orange-600 duration-300 ease-in-out",children:[(0,v.jsx)(u.AWH,{size:22}),(0,v.jsx)("div",{className:"text-sm font-medium",children:n.likes.length})]})}):(0,v.jsxs)("div",{title:"Like",onClick:function(){return alert("Please sign in to be able to like")},className:"flex justify-center items-center gap-2 cursor-pointer hover:text-orange-600 duration-300 ease-in-out",children:[(0,v.jsx)(u.AWH,{size:22}),(0,v.jsx)("div",{className:"text-sm font-medium",children:n.likes.length})]}),k?(0,v.jsxs)("div",{title:"Comments",onClick:function(){return X(!0)},className:"flex justify-center items-center gap-2 cursor-pointer hover:text-orange-600 duration-300 ease-in-out",children:[(0,v.jsx)(c.VRI,{size:20}),(0,v.jsx)("div",{className:"text-sm font-medium",children:null===F||void 0===F?void 0:F.length})]}):(0,v.jsxs)("div",{title:"Comments",onClick:function(){return alert("Please sign in to be able to comment")},className:"flex justify-center items-center gap-2 cursor-pointer hover:text-orange-600 duration-300 ease-in-out",children:[(0,v.jsx)(c.VRI,{size:20}),(0,v.jsx)("div",{className:"text-sm font-medium",children:null===F||void 0===F?void 0:F.length})]})]}),(0,v.jsx)(h,{post:n,pictureModal:L,setPictureModal:M}),(0,v.jsx)(x,{post:n,postMenu:R,setPostMenu:A,isLiked:N,toggleLike:C,setCommentsMenu:X,user:w,authUser:k,authLoading:Z,deletePost:I}),(0,v.jsx)(g,{post:n,commentsMenu:H,setCommentsMenu:X})]})}));t.default=y},438:function(e,t,n){n.d(t,{aC:function(){return m},f0:function(){return v},aU:function(){return x},mr:function(){return h}});var r=n(4165),i=n(5861),s=n(9439),a=n(2791),o=n(7689),u=n(4098),c=n(5063),l=n(2481),d=n(6910);function f(e){return p.apply(this,arguments)}function p(){return(p=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,l.IO)((0,l.hJ)(c.db,"users"),(0,l.ar)("username","==",t)),e.next=3,(0,l.PL)(n);case 3:return i=e.sent,e.abrupt("return",i.size>0);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(){var e=(0,d.F_)(c.I8),t=(0,s.Z)(e,3),n=t[0],o=t[1],u=t[2],f=(0,a.useState)(!0),p=(0,s.Z)(f,2),m=p[0],v=p[1],h=(0,a.useState)(null),x=(0,s.Z)(h,2),g=x[0],y=x[1];return(0,a.useEffect)((function(){function e(){return(e=(0,i.Z)((0,r.Z)().mark((function e(){var t,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(!0),t=(0,l.JU)(c.db,"users",n.uid),e.next=4,(0,l.QT)(t);case 4:i=e.sent,y(i.data()),v(!1);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}o||(n?function(){e.apply(this,arguments)}():v(!1))}),[o,n]),{user:g,isLoading:m,error:u}}function v(){var e=(0,a.useState)(!1),t=(0,s.Z)(e,2),n=t[0],l=t[1],d=(0,a.useState)(""),f=(0,s.Z)(d,2),p=f[0],m=f[1],v=(0,o.s0)();function h(){return(h=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i,s,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.email,i=t.password,s=t.redirectTo,a=void 0===s?"/":s,l(!0),m(""),e.prev=3,e.next=6,(0,u.e5)(c.I8,n,i);case 6:v(a),e.next=14;break;case 9:return e.prev=9,e.t0=e.catch(3),m(e.t0.message),l(!1),e.abrupt("return",!1);case 14:return m(""),l(!1),e.abrupt("return",!0);case 17:case"end":return e.stop()}}),e,null,[[3,9]])})))).apply(this,arguments)}return{login:function(e){return h.apply(this,arguments)},isLoading:n,error:p}}function h(){var e=(0,a.useState)(!1),t=(0,s.Z)(e,2),n=t[0],d=t[1],p=(0,a.useState)(""),m=(0,s.Z)(p,2),v=m[0],h=m[1],x=(0,o.s0)();function g(){return(g=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i,s,a,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,i=t.email,s=t.password,a=t.redirectTo,void 0===a?"/":a,d(!0),e.next=4,f(n);case 4:if(!e.sent){e.next=10;break}h("Username already exists"),d(!1),e.next=25;break;case 10:return e.prev=10,e.next=13,(0,u.Xb)(c.I8,i,s);case 13:return o=e.sent,e.next=16,(0,l.pl)((0,l.JU)(c.db,"users",o.user.uid),{id:o.user.uid,username:n,avatar:"",date:Date.now()});case 16:x("/"),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(10),h("Signed up failed");case 22:return e.prev=22,d(!1),e.finish(22);case 25:case"end":return e.stop()}}),e,null,[[10,19,22,25]])})))).apply(this,arguments)}return{register:function(e){return g.apply(this,arguments)},isLoading:n,error:v}}function x(){var e=(0,d.QJ)(c.I8),t=(0,s.Z)(e,3),n=t[0],a=t[1],u=(t[2],(0,o.s0)());function l(){return(l=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n();case 2:if(!e.sent){e.next=4;break}u("/signin");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return{logout:function(){return l.apply(this,arguments)},isLoading:a}}},2508:function(e,t,n){n.d(t,{MD:function(){return f},X0:function(){return p},uK:function(){return d}});var r=n(4165),i=n(5861),s=n(9439),a=n(2791),o=n(5063),u=n(2481),c=n(2146),l=n(5854);function d(e){var t=e.postID,n=e.uid,c=(0,a.useState)(!1),d=(0,s.Z)(c,2),f=d[0],p=d[1];function m(){return(m=(0,i.Z)((0,r.Z)().mark((function e(i){var s,a,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),s=(0,l.k$)(),a=Date.now(),c=(0,u.JU)(o.db,"comments",s),e.next=6,(0,u.pl)(c,{text:i,id:s,postID:t,date:a,uid:n});case 6:p(!1);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return{addComment:function(e){return m.apply(this,arguments)},isLoading:f}}function f(e){var t=(0,u.IO)((0,u.hJ)(o.db,"comments"),(0,u.ar)("postID","==",e),(0,u.Xo)("date","desc")),n=(0,c.d4)(t),r=(0,s.Z)(n,3),i=r[0],a=r[1],l=r[2];if(l)throw l;return{comments:i,isLoading:a}}function p(e){var t=(0,a.useState)(!1),n=(0,s.Z)(t,2),c=n[0],l=n[1];function d(){return(d=(0,i.Z)((0,r.Z)().mark((function t(){var n;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Are you sure you want to delete this comment?")){t.next=7;break}return l(!0),n=(0,u.JU)(o.db,"comments",e),t.next=6,(0,u.oe)(n);case 6:l(!1);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return{deleteComment:function(){return d.apply(this,arguments)},isLoading:c}}},3108:function(e,t,n){n.d(t,{MB:function(){return m},UV:function(){return p},aF:function(){return f}});var r=n(4165),i=n(5861),s=n(9439),a=n(2791),o=n(5063),u=n(2481),c=n(2146),l=n(276),d=n(7689);function f(e){var t=(0,u.IO)((0,u.JU)(o.db,"users",e)),n=(0,c.Xi)(t),r=(0,s.Z)(n,2);return{user:r[0],isLoading:r[1]}}function p(){var e=(0,c.d4)((0,u.hJ)(o.db,"users")),t=(0,s.Z)(e,2);return{users:t[0],isLoading:t[1]}}function m(e){var t=(0,a.useState)(!1),n=(0,s.Z)(t,2),c=(n[0],n[1]),f=(0,a.useState)(null),p=(0,s.Z)(f,2),m=p[0],v=p[1],h=(0,d.s0)();function x(){return(x=(0,i.Z)((0,r.Z)().mark((function t(){var n,i,s;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(m){t.next=2;break}return t.abrupt("return");case 2:return c(!0),n=(0,l.iH)(o.tO,"avatars/"+e),t.next=6,(0,l.KV)(n,m);case 6:return t.next=8,(0,l.Jt)(n);case 8:return i=t.sent,s=(0,u.JU)(o.db,"users",e),t.next=12,(0,u.r7)(s,{avatar:i});case 12:c(!1),h(0);case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return{file:m,setFile:v,updateAvatar:function(){return x.apply(this,arguments)}}}},3441:function(e,t,n){n.d(t,{YD:function(){return b}});var r=n(9439),i=n(1413),s=n(4925),a=n(5671),o=n(3144),u=n(7326),c=n(136),l=n(7277),d=n(2791),f=["as","triggerOnce","threshold","root","rootMargin","onChange","skip","trackVisibility","delay","initialInView","fallbackInView"],p=Object.defineProperty,m=function(e,t,n){return function(e,t,n){t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!==typeof t?t+"":t,n),n},v=new Map,h=new WeakMap,x=0,g=void 0;function y(e){return Object.keys(e).sort().filter((function(t){return void 0!==e[t]})).map((function(t){return"".concat(t,"_").concat("root"===t?(n=e.root)?(h.has(n)||(x+=1,h.set(n,x.toString())),h.get(n)):"0":e[t]);var n})).toString()}function w(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:g;if("undefined"===typeof window.IntersectionObserver&&void 0!==r){var i=e.getBoundingClientRect();return t(r,{isIntersecting:r,target:e,intersectionRatio:"number"===typeof n.threshold?n.threshold:0,time:0,boundingClientRect:i,intersectionRect:i,rootBounds:i}),function(){}}var s=function(e){var t=y(e),n=v.get(t);if(!n){var r,i=new Map,s=new IntersectionObserver((function(t){t.forEach((function(t){var n,s=t.isIntersecting&&r.some((function(e){return t.intersectionRatio>=e}));e.trackVisibility&&"undefined"===typeof t.isVisible&&(t.isVisible=s),null==(n=i.get(t.target))||n.forEach((function(e){e(s,t)}))}))}),e);r=s.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),n={id:t,observer:s,elements:i},v.set(t,n)}return n}(n),a=s.id,o=s.observer,u=s.elements,c=u.get(e)||[];return u.has(e)||u.set(e,c),c.push(t),o.observe(e),function(){c.splice(c.indexOf(t),1),0===c.length&&(u.delete(e),o.unobserve(e)),0===u.size&&(o.disconnect(),v.delete(a))}}d.Component;function b(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.threshold,i=t.delay,s=t.trackVisibility,a=t.rootMargin,o=t.root,u=t.triggerOnce,c=t.skip,l=t.initialInView,f=t.fallbackInView,p=t.onChange,m=d.useState(null),v=(0,r.Z)(m,2),h=v[0],x=v[1],g=d.useRef(),y=d.useState({inView:!!l,entry:void 0}),b=(0,r.Z)(y,2),j=b[0],k=b[1];g.current=p,d.useEffect((function(){var e;if(!c&&h)return e=w(h,(function(t,n){k({inView:t,entry:n}),g.current&&g.current(t,n),n.isIntersecting&&u&&e&&(e(),e=void 0)}),{root:o,rootMargin:a,threshold:n,trackVisibility:s,delay:i},f),function(){e&&e()}}),[Array.isArray(n)?n.toString():n,h,o,a,u,c,s,f,i]);var Z=null==(e=j.entry)?void 0:e.target,N=d.useRef();h||!Z||u||c||N.current===Z||(N.current=Z,k({inView:!!l,entry:void 0}));var C=[x,j.inView,j.entry];return C.ref=C[0],C.inView=C[1],C.entry=C[2],C}}}]);
//# sourceMappingURL=540.55add0e9.chunk.js.map