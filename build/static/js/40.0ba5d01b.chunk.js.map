{"version":3,"file":"static/js/40.0ba5d01b.chunk.js","mappings":"uMAiIA,UA1HoB,SAAHA,GAAyC,IAAnCC,EAAWD,EAAXC,YAAaC,EAAcF,EAAdE,eAClCC,GAA4BC,EAAAA,EAAAA,MAApBC,EAAIF,EAAJE,KAAMC,EAASH,EAATG,UACdC,GAAwCC,EAAAA,EAAAA,IAAoB,OAAJH,QAAI,IAAJA,OAAI,EAAJA,EAAMI,IAAtDC,EAAIH,EAAJG,KAAMC,EAAOJ,EAAPI,QAASC,EAAYL,EAAZK,aACfC,GAAWC,EAAAA,EAAAA,MAAXD,OAUR,OAJAE,EAAAA,EAAAA,YAAU,WACRH,GACF,GAAG,CAACF,EAAME,IAENN,EAAkB,MAGpBU,EAAAA,EAAAA,KAAAC,EAAAA,SAAA,CAAAC,UACEF,EAAAA,EAAAA,KAAA,OACEG,QAAS,kBAAMjB,GAAe,EAAM,EACpCkB,UAAS,GAAAC,OACPpB,EAAc,SAAW,oBAAmB,0EAC2BiB,UAEzEI,EAAAA,EAAAA,MAAA,OACEH,QAAS,SAACI,GAAC,OAAKA,EAAEC,iBAAiB,EACnCJ,UAAS,GAAAC,OACPpB,EAAc,oBAAsB,gBAAe,iKAC2GiB,SAAA,EAGhKF,EAAAA,EAAAA,KAAA,OACEI,UAAS,GAAAC,OACPpB,EAAc,cAAgB,YAAW,+EACmCiB,UAE9EF,EAAAA,EAAAA,KAAA,OACES,MAAM,aACNC,aAAc,kBAAMxB,GAAe,EAAM,EACzCyB,YAAa,kBAAMzB,GAAe,EAAM,EACxCkB,UAAU,gGAKdE,EAAAA,EAAAA,MAAA,OAAKF,UAAU,kEAAiEF,SAAA,EAE9EF,EAAAA,EAAAA,KAAA,OACEI,UAAS,GAAAC,OACPpB,EAAc,cAAgB,YAAW,+DACmBiB,UAE9DI,EAAAA,EAAAA,MAAA,SACEM,QAAQ,SACRH,MAAM,gBACNL,UAAU,wFAAuFF,SAAA,EAEjGF,EAAAA,EAAAA,KAACa,EAAAA,IAAgB,CAACC,KAAM,MACxBd,EAAAA,EAAAA,KAAA,QAAAE,SAAM,mBACNF,EAAAA,EAAAA,KAAA,SACEP,GAAG,SACHsB,KAAK,OACLC,OAAO,UACPZ,UAAU,SACVa,SA1DhB,SAAsBV,GACpBZ,EAAQY,EAAEW,OAAOC,MAAM,GACzB,UA8DUnB,EAAAA,EAAAA,KAAA,OACEI,UAAS,GAAAC,OACPpB,EAAc,cAAgB,YAAW,+DACmBiB,UAE9DI,EAAAA,EAAAA,MAAA,OAEEG,MAAM,eACNL,UAAU,4FAA2FF,SAAA,EAErGF,EAAAA,EAAAA,KAACoB,EAAAA,IAAM,CAACN,KAAM,MACdd,EAAAA,EAAAA,KAAA,QAAAE,SAAM,0BAKVF,EAAAA,EAAAA,KAAA,OACEI,UAAS,GAAAC,OACPpB,EAAc,cAAgB,YAAW,+DACmBiB,UAE9DI,EAAAA,EAAAA,MAAA,OAEEG,MAAM,eACNL,UAAU,4FAA2FF,SAAA,EAErGF,EAAAA,EAAAA,KAACoB,EAAAA,IAAM,CAACN,KAAM,MACdd,EAAAA,EAAAA,KAAA,QAAAE,SAAM,yBAKVF,EAAAA,EAAAA,KAAA,OACEI,UAAS,GAAAC,OACPpB,EAAc,cAAgB,YAAW,mEACuBiB,UAElEI,EAAAA,EAAAA,MAAA,OACEG,MAAM,WACNN,QAASN,EACTO,UAAU,wFAAuFF,SAAA,EAEjGF,EAAAA,EAAAA,KAACqB,EAAAA,IAAkB,CAACP,KAAM,MAC1Bd,EAAAA,EAAAA,KAAA,QAAAE,SAAM,2BAQtB,C,6JChHMoB,GAAMC,EAAAA,EAAAA,IATW,CACrBC,OAAQC,0CACRC,WAAYD,yCACZE,UAAWF,yBACXG,cAAeH,qCACfI,kBAAmBJ,eACnBK,MAAOL,8CAIIM,GAAOC,EAAAA,EAAAA,IAAQV,GACfW,GAAKC,EAAAA,EAAAA,IAAaZ,GAClBa,GAAUC,EAAAA,EAAAA,IAAWd,IAChBe,EAAAA,EAAAA,IAAaf,E,6NChBhB,SAAegB,EAAgBC,GAAA,OAAAC,EAAAC,MAAC,KAADC,UAAA,CAK7C,SAAAF,IAAA,OAAAA,GAAAG,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MALc,SAAAC,EAAgCC,GAAQ,IAAAC,EAAAC,EAAA,OAAAL,EAAAA,EAAAA,KAAAM,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,OACsB,OAArEL,GAAIM,EAAAA,EAAAA,KAAMC,EAAAA,EAAAA,IAAWtB,EAAAA,GAAI,UAAUuB,EAAAA,EAAAA,IAAM,WAAY,KAAMT,IAAUI,EAAAE,KAAA,GAC/CI,EAAAA,EAAAA,IAAQT,GAAG,KAAD,EAAnB,OAAbC,EAAaE,EAAAO,KAAAP,EAAAQ,OAAA,SAEZV,EAAcnC,KAAO,GAAC,wBAAAqC,EAAAS,OAAA,GAAAd,EAAA,MAC9BL,MAAA,KAAAC,UAAA,CCGM,SAAStD,IACd,IAAAyE,GAAuCC,EAAAA,EAAAA,IAAa/B,EAAAA,IAAKgC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAAlDI,EAAQF,EAAA,GAAEG,EAAWH,EAAA,GAAEI,EAAKJ,EAAA,GACnCK,GAAgCC,EAAAA,EAAAA,WAAS,GAAKC,GAAAN,EAAAA,EAAAA,GAAAI,EAAA,GAAvC9E,EAASgF,EAAA,GAAEC,EAAUD,EAAA,GAC5BE,GAAwBH,EAAAA,EAAAA,UAAS,MAAKI,GAAAT,EAAAA,EAAAA,GAAAQ,EAAA,GAA/BnF,EAAIoF,EAAA,GAAEC,EAAOD,EAAA,GAiBpB,OAfA1E,EAAAA,EAAAA,YAAU,WACgB,SAAA4E,IAMvB,OANuBA,GAAAhC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAxB,SAAAC,IAAA,IAAA8B,EAAAC,EAAA,OAAAjC,EAAAA,EAAAA,KAAAM,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,OAE4C,OAD1CkB,GAAW,GACLK,GAAME,EAAAA,EAAAA,IAAI7C,EAAAA,GAAI,QAASgC,EAASc,KAAI5B,EAAAE,KAAA,GACpB2B,EAAAA,EAAAA,IAAOJ,GAAK,KAAD,EAA3BC,EAAO1B,EAAAO,KACbgB,EAAQG,EAAQI,QAChBV,GAAW,GAAO,wBAAApB,EAAAS,OAAA,GAAAd,EAAA,MACnBL,MAAA,KAAAC,UAAA,CAEIwB,IACCD,EAVS,WACSU,EAAAlC,MAAC,KAADC,UAAA,CASRwC,GACTX,GAAW,GAEpB,GAAG,CAACL,EAAaD,IAEV,CAAE5E,KAAAA,EAAMC,UAAAA,EAAW6E,MAAAA,EAC5B,CAEO,SAASgB,IACd,IAAAC,GAAgCf,EAAAA,EAAAA,WAAS,GAAMgB,GAAArB,EAAAA,EAAAA,GAAAoB,EAAA,GAAxC9F,EAAS+F,EAAA,GAAEd,EAAUc,EAAA,GAC5BC,GAA0BjB,EAAAA,EAAAA,UAAS,IAAGkB,GAAAvB,EAAAA,EAAAA,GAAAsB,EAAA,GAA/BnB,EAAKoB,EAAA,GAAEC,EAAQD,EAAA,GAChBE,GAAWC,EAAAA,EAAAA,MAEG,SAAAC,IAenB,OAfmBA,GAAAhD,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAApB,SAAA+C,EAAA5G,GAAA,IAAA6G,EAAAC,EAAAC,EAAAC,EAAA,OAAApD,EAAAA,EAAAA,KAAAM,MAAA,SAAA+C,GAAA,cAAAA,EAAA7C,KAAA6C,EAAA5C,MAAA,OAEe,OAFQwC,EAAK7G,EAAL6G,MAAOC,EAAQ9G,EAAR8G,SAAQC,EAAA/G,EAAEgH,WAAAA,OAAU,IAAAD,EAAG,IAAGA,EACtDxB,GAAW,GACXiB,EAAS,IAAIS,EAAA7C,KAAA,EAAA6C,EAAA5C,KAAA,GAEL6C,EAAAA,EAAAA,IAA2BnE,EAAAA,GAAM8D,EAAOC,GAAU,KAAD,EACvDL,EAASO,GAAYC,EAAA5C,KAAA,gBAIH,OAJG4C,EAAA7C,KAAA,EAAA6C,EAAAE,GAAAF,EAAA,SAErBT,EAASS,EAAAE,GAAEC,SAEX7B,GAAW,GAAO0B,EAAAtC,OAAA,UACX,GAAK,QAGI,OADlB6B,EAAS,IACTjB,GAAW,GAAO0B,EAAAtC,OAAA,UACX,GAAI,yBAAAsC,EAAArC,OAAA,GAAAgC,EAAA,mBACZnD,MAAA,KAAAC,UAAA,CAED,MAAO,CAAE2D,MAnBsB,SAEX9D,GAAA,OAAAoD,EAAAlD,MAAC,KAADC,UAAA,EAiBJpD,UAAAA,EAAW6E,MAAAA,EAC7B,CAEO,SAASmC,IACd,IAAAC,GAAgClC,EAAAA,EAAAA,WAAS,GAAMmC,GAAAxC,EAAAA,EAAAA,GAAAuC,EAAA,GAAxCjH,EAASkH,EAAA,GAAEjC,EAAUiC,EAAA,GAC5BC,GAA0BpC,EAAAA,EAAAA,UAAS,IAAGqC,GAAA1C,EAAAA,EAAAA,GAAAyC,EAAA,GAA/BtC,EAAKuC,EAAA,GAAElB,EAAQkB,EAAA,GAChBjB,GAAWC,EAAAA,EAAAA,MAEM,SAAAiB,IAyBtB,OAzBsBA,GAAAhE,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAvB,SAAA+D,EAAAC,GAAA,IAAA9D,EAAA8C,EAAAC,EAAAgB,EAAAC,EAAA,OAAAnE,EAAAA,EAAAA,KAAAM,MAAA,SAAA8D,GAAA,cAAAA,EAAA5D,KAAA4D,EAAA3D,MAAA,OACmB,OADON,EAAQ8D,EAAR9D,SAAU8C,EAAKgB,EAALhB,MAAOC,EAAQe,EAARf,SAAQgB,EAAAD,EAAEb,gBAAU,IAAAc,EAAG,IAAGA,EACnEvC,GAAW,GAAMyC,EAAA3D,KAAA,EACYf,EAAiBS,GAAU,KAAD,EAAnC,IAAAiE,EAAAtD,KAED,CAADsD,EAAA3D,KAAA,SAChBmC,EAAS,2BACTjB,GAAW,GAAOyC,EAAA3D,KAAA,wBAAA2D,EAAA5D,KAAA,GAAA4D,EAAA3D,KAAA,IAGE4D,EAAAA,EAAAA,IAA+BlF,EAAAA,GAAM8D,EAAOC,GAAU,KAAD,GAA9D,OAAHiB,EAAGC,EAAAtD,KAAAsD,EAAA3D,KAAA,IAEH6D,EAAAA,EAAAA,KAAOpC,EAAAA,EAAAA,IAAI7C,EAAAA,GAAI,QAAS8E,EAAI1H,KAAK0F,KAAM,CAC3CtF,GAAIsH,EAAI1H,KAAK0F,IACbhC,SAAAA,EACAoE,OAAQ,GACRC,KAAMC,KAAKC,QACV,KAAD,GAEF7B,EAAS,KAAKuB,EAAA3D,KAAA,iBAAA2D,EAAA5D,KAAA,GAAA4D,EAAAb,GAAAa,EAAA,UAEdxB,EAAS,oBAAoB,QAEX,OAFWwB,EAAA5D,KAAA,GAE7BmB,GAAW,GAAOyC,EAAAO,OAAA,6BAAAP,EAAApD,OAAA,GAAAgD,EAAA,2BAGvBnE,MAAA,KAAAC,UAAA,CAED,MAAO,CAAE8E,SA7BsB,SAERC,GAAA,OAAAd,EAAAlE,MAAC,KAADC,UAAA,EA2BJpD,UAAAA,EAAW6E,MAAAA,EAChC,CAEO,SAASrE,IACd,IAAA4H,GAAoCC,EAAAA,EAAAA,IAAW5F,EAAAA,IAAK6F,GAAA5D,EAAAA,EAAAA,GAAA0D,EAAA,GAA7CG,EAAOD,EAAA,GAAEtI,EAASsI,EAAA,GACnBnC,GAD0BmC,EAAA,IACflC,EAAAA,EAAAA,OAEI,SAAAoC,IAIpB,OAJoBA,GAAAnF,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAArB,SAAAkF,IAAA,OAAAnF,EAAAA,EAAAA,KAAAM,MAAA,SAAA8E,GAAA,cAAAA,EAAA5E,KAAA4E,EAAA3E,MAAA,cAAA2E,EAAA3E,KAAA,EACYwE,IAAS,WAAAG,EAAAtE,KAAC,CAADsE,EAAA3E,KAAA,QACjBoC,EAAS,WAAW,wBAAAuC,EAAApE,OAAA,GAAAmE,EAAA,MAEvBtF,MAAA,KAAAC,UAAA,CAED,MAAO,CAAE7C,OARsB,WAEV,OAAAiI,EAAArF,MAAC,KAADC,UAAA,EAMJpD,UAAAA,EACnB,C,qMC/FO,SAAS2I,EAAQxI,GACtB,IAAMuD,GAAIM,EAAAA,EAAAA,KAAMwB,EAAAA,EAAAA,IAAI7C,EAAAA,GAAI,QAASxC,IACjCyI,GAA0BC,EAAAA,EAAAA,IAAgBnF,GAAEoF,GAAApE,EAAAA,EAAAA,GAAAkE,EAAA,GAE5C,MAAO,CAAE7I,KAFE+I,EAAA,GAEI9I,UAFO8I,EAAA,GAGxB,CAEO,SAASC,IACd,IAAAC,GAA2BC,EAAAA,EAAAA,KAAkBhF,EAAAA,EAAAA,IAAWtB,EAAAA,GAAI,UAASuG,GAAAxE,EAAAA,EAAAA,GAAAsE,EAAA,GACrE,MAAO,CAAEG,MADGD,EAAA,GACIlJ,UADOkJ,EAAA,GAEzB,CAEO,SAAShJ,EAAgBuF,GAC9B,IAAAX,GAAgCC,EAAAA,EAAAA,WAAS,GAAMC,GAAAN,EAAAA,EAAAA,GAAAI,EAAA,GAA7BG,GAAFD,EAAA,GAAYA,EAAA,IAC5BE,GAAwBH,EAAAA,EAAAA,UAAS,MAAKI,GAAAT,EAAAA,EAAAA,GAAAQ,EAAA,GAA/B9E,EAAI+E,EAAA,GAAE9E,EAAO8E,EAAA,GACdgB,GAAWC,EAAAA,EAAAA,MAEU,SAAAgD,IAc1B,OAd0BA,GAAA/F,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAA3B,SAAAC,IAAA,IAAA6F,EAAAC,EAAAC,EAAA,OAAAjG,EAAAA,EAAAA,KAAAM,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,UACO3D,EAAK,CAADyD,EAAAE,KAAA,eAAAF,EAAAQ,OAAA,iBAGqC,OAD9CY,GAAW,GACLoE,GAAU/D,EAAAA,EAAAA,IAAIzC,EAAAA,GAAS,WAAa4C,GAAI5B,EAAAE,KAAA,GACxCyF,EAAAA,EAAAA,IAAYH,EAASjJ,GAAM,KAAD,SAAAyD,EAAAE,KAAA,GAER0F,EAAAA,EAAAA,IAAeJ,GAAS,KAAD,EAEX,OAF9BC,EAASzF,EAAAO,KAETmF,GAAS/D,EAAAA,EAAAA,IAAI7C,EAAAA,GAAI,QAAS8C,GAAI5B,EAAAE,KAAA,IAC9B2F,EAAAA,EAAAA,IAAUH,EAAQ,CAAE1B,OAAQyB,IAAa,KAAD,GAC9CrE,GAAW,GAEXkB,EAAS,GAAG,yBAAAtC,EAAAS,OAAA,GAAAd,EAAA,MACbL,MAAA,KAAAC,UAAA,CAED,MAAO,CAAEhD,KAAAA,EAAMC,QAAAA,EAASC,aAlBO,WAEJ,OAAA8I,EAAAjG,MAAC,KAADC,UAAA,EAiB7B,C","sources":["components/navigation/ProfileMenu.jsx","firebase.js","utils/isUsernameExists.js","hooks/auth.js","hooks/users.js"],"sourcesContent":["import React, { useEffect } from \"react\";\nimport { BiEdit } from \"react-icons/bi\";\nimport { MdOutlineExitToApp } from \"react-icons/md\";\nimport { LiaUserEditSolid } from \"react-icons/lia\";\nimport { useAuth, useLogout } from \"../../hooks/auth\";\nimport { useUpdateAvatar } from \"../../hooks/users\";\n\nconst ProfileMenu = ({ profileMenu, setProfileMenu }) => {\n  const { user, isLoading } = useAuth();\n  const { file, setFile, updateAvatar } = useUpdateAvatar(user?.id);\n  const { logout } = useLogout();\n\n  function handleChange(e) {\n    setFile(e.target.files[0]);\n  }\n\n  useEffect(() => {\n    updateAvatar();\n  }, [file, updateAvatar]);\n\n  if (isLoading) return null;\n\n  return (\n    <>\n      <div\n        onClick={() => setProfileMenu(false)}\n        className={`${\n          profileMenu ? \"h-full\" : \"h-0 delay-[250ms]\"\n        } bg-modal fixed top-0 left-0 w-full flex justify-center items-end z-50`}\n      >\n        <div\n          onClick={(e) => e.stopPropagation()}\n          className={`${\n            profileMenu ? \"h-1/3 opacity-100\" : \"h-0 opacity-0\"\n          } bg-black text-white w-full max-w-[500px] px-4 py-8 rounded-tl-3xl rounded-tr-3xl flex flex-col justify-between overflow-hidden duration-300 ease-in-out z-50`}\n        >\n          {/* Profile Menu Handle */}\n          <div\n            className={`${\n              profileMenu ? \"opacity-100\" : \"opacity-0\"\n            } w-full flex justify-center items-center delay-150 duration-300 ease-in-out`}\n          >\n            <div\n              title=\"CLose Menu\"\n              onTouchStart={() => setProfileMenu(false)}\n              onMouseDown={() => setProfileMenu(false)}\n              className=\"w-1/4 h-2 bg-white rounded-full cursor-pointer hover:opacity-50 duration-300 ease-in-out\"\n            ></div>\n          </div>\n\n          {/* Profile Menu Functionalities */}\n          <div className=\"w-full flex flex-col justify-center gap-8 text-lg font-semibold\">\n            {/* Update Avatar */}\n            <div\n              className={`${\n                profileMenu ? \"opacity-100\" : \"opacity-0\"\n              } flex items-center gap-2 delay-200 duration-300 ease-in-out`}\n            >\n              <label\n                htmlFor=\"avatar\"\n                title=\"Update Avatar\"\n                className=\"flex items-center gap-2 cursor-pointer hover:text-orange-600 duration-300 ease-in-out\"\n              >\n                <LiaUserEditSolid size={22} />\n                <span>Update Avatar</span>\n                <input\n                  id=\"avatar\"\n                  type=\"file\"\n                  accept=\"image/*\"\n                  className=\"hidden\"\n                  onChange={handleChange}\n                />\n              </label>\n            </div>\n\n            {/* Change Username */}\n            <div\n              className={`${\n                profileMenu ? \"opacity-100\" : \"opacity-0\"\n              } flex items-center gap-2 delay-200 duration-300 ease-in-out`}\n            >\n              <div\n                // title=\"Change Username\"\n                title=\"Comming Soon\"\n                className=\"flex items-center gap-2 cursor-not-allowed hover:text-orange-600 duration-300 ease-in-out\"\n              >\n                <BiEdit size={22} />\n                <span>Change Username</span>\n              </div>\n            </div>\n\n            {/* Change Caption */}\n            <div\n              className={`${\n                profileMenu ? \"opacity-100\" : \"opacity-0\"\n              } flex items-center gap-2 delay-200 duration-300 ease-in-out`}\n            >\n              <div\n                // title=\"Change Caption\"\n                title=\"Comming Soon\"\n                className=\"flex items-center gap-2 cursor-not-allowed hover:text-orange-600 duration-300 ease-in-out\"\n              >\n                <BiEdit size={22} />\n                <span>Change Caption</span>\n              </div>\n            </div>\n\n            {/* Sign Out */}\n            <div\n              className={`${\n                profileMenu ? \"opacity-100\" : \"opacity-0\"\n              } flex items-center gap-2 delay-[250ms] duration-300 ease-in-out`}\n            >\n              <div\n                title=\"Sign Out\"\n                onClick={logout}\n                className=\"flex items-center gap-2 cursor-pointer hover:text-orange-600 duration-300 ease-in-out\"\n              >\n                <MdOutlineExitToApp size={22} />\n                <span>Sign Out</span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default ProfileMenu;\n","import { initializeApp } from \"firebase/app\";\nimport { getAuth } from \"firebase/auth\";\nimport { getFirestore } from \"firebase/firestore\";\nimport { getStorage } from \"firebase/storage\";\nimport { getAnalytics } from \"firebase/analytics\";\n\nconst firebaseConfig = {\n  apiKey: process.env.REACT_APP_FIREBASE_API_KEY,\n  authDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,\n  projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\n  storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGING_SENDER,\n  appId: process.env.REACT_APP_FIREBASE_APP_ID,\n};\n\nconst app = initializeApp(firebaseConfig);\nexport const auth = getAuth(app);\nexport const db = getFirestore(app);\nexport const storage = getStorage(app);\nconst analytics = getAnalytics(app);\n\nexport default app;\n","import { db } from \"../firebase\";\nimport { collection, getDocs, query, where } from \"firebase/firestore\";\n\nexport default async function isUsernameExists(username) {\n  const q = query(collection(db, \"users\"), where(\"username\", \"==\", username));\n  const querySnapshot = await getDocs(q);\n\n  return querySnapshot.size > 0;\n}\n","import { useEffect, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport {\n  createUserWithEmailAndPassword,\n  signInWithEmailAndPassword,\n} from \"firebase/auth\";\nimport { auth, db } from \"../firebase\";\nimport { doc, getDoc, setDoc } from \"firebase/firestore\";\nimport { useAuthState, useSignOut } from \"react-firebase-hooks/auth\";\nimport isUsernameExists from \"../utils/isUsernameExists\";\n\nexport function useAuth() {\n  const [authUser, authLoading, error] = useAuthState(auth);\n  const [isLoading, setLoading] = useState(true);\n  const [user, setUser] = useState(null);\n\n  useEffect(() => {\n    async function fetchData() {\n      setLoading(true);\n      const ref = doc(db, \"users\", authUser.uid);\n      const docSnap = await getDoc(ref);\n      setUser(docSnap.data());\n      setLoading(false);\n    }\n\n    if (!authLoading) {\n      if (authUser) fetchData();\n      else setLoading(false); // Not signed in\n    }\n  }, [authLoading, authUser]);\n\n  return { user, isLoading, error };\n}\n\nexport function useLogin() {\n  const [isLoading, setLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n  const navigate = useNavigate();\n\n  async function login({ email, password, redirectTo = \"/\" }) {\n    setLoading(true);\n    setError(\"\");\n    try {\n      await signInWithEmailAndPassword(auth, email, password);\n      navigate(redirectTo);\n    } catch (e) {\n      setError(e.message);\n      // console.log(error.message);\n      setLoading(false);\n      return false; // Return false if login failed\n    }\n    setError(\"\");\n    setLoading(false);\n    return true; // Return true if login succeeded\n  }\n\n  return { login, isLoading, error };\n}\n\nexport function useRegister() {\n  const [isLoading, setLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n  const navigate = useNavigate();\n\n  async function register({ username, email, password, redirectTo = \"/\" }) {\n    setLoading(true);\n    const usernameExists = await isUsernameExists(username);\n\n    if (usernameExists) {\n      setError(\"Username already exists\");\n      setLoading(false);\n    } else {\n      try {\n        const res = await createUserWithEmailAndPassword(auth, email, password);\n\n        await setDoc(doc(db, \"users\", res.user.uid), {\n          id: res.user.uid,\n          username,\n          avatar: \"\",\n          date: Date.now(),\n        });\n\n        navigate(\"/\");\n      } catch (error) {\n        setError(\"Signed up failed\");\n      } finally {\n        setLoading(false);\n      }\n    }\n  }\n\n  return { register, isLoading, error };\n}\n\nexport function useLogout() {\n  const [signOut, isLoading, error] = useSignOut(auth);\n  const navigate = useNavigate();\n\n  async function logout() {\n    if (await signOut()) {\n      navigate(\"/signin\");\n    } // else show error [signOut() returns false if failed]\n  }\n\n  return { logout, isLoading };\n}\n","import { useState } from \"react\";\nimport { db, storage } from \"../firebase\";\nimport { collection, doc, query, updateDoc } from \"firebase/firestore\";\nimport {\n  useCollectionData,\n  useDocumentData,\n} from \"react-firebase-hooks/firestore\";\nimport { getDownloadURL, ref, uploadBytes } from \"firebase/storage\";\nimport { useNavigate } from \"react-router-dom\";\n\nexport function useUser(id) {\n  const q = query(doc(db, \"users\", id));\n  const [user, isLoading] = useDocumentData(q);\n\n  return { user, isLoading };\n}\n\nexport function useUsers() {\n  const [users, isLoading] = useCollectionData(collection(db, \"users\"));\n  return { users, isLoading };\n}\n\nexport function useUpdateAvatar(uid) {\n  const [isLoading, setLoading] = useState(false);\n  const [file, setFile] = useState(null);\n  const navigate = useNavigate();\n\n  async function updateAvatar() {\n    if (!file) return;\n\n    setLoading(true);\n    const fileRef = ref(storage, \"avatars/\" + uid);\n    await uploadBytes(fileRef, file);\n\n    const avatarURL = await getDownloadURL(fileRef);\n\n    const docRef = doc(db, \"users\", uid);\n    await updateDoc(docRef, { avatar: avatarURL });\n    setLoading(false);\n\n    navigate(0);\n  }\n\n  return { file, setFile, updateAvatar };\n}\n"],"names":["_ref","profileMenu","setProfileMenu","_useAuth","useAuth","user","isLoading","_useUpdateAvatar","useUpdateAvatar","id","file","setFile","updateAvatar","logout","useLogout","useEffect","_jsx","_Fragment","children","onClick","className","concat","_jsxs","e","stopPropagation","title","onTouchStart","onMouseDown","htmlFor","LiaUserEditSolid","size","type","accept","onChange","target","files","BiEdit","MdOutlineExitToApp","app","initializeApp","apiKey","process","authDomain","projectId","storageBucket","messagingSenderId","appId","auth","getAuth","db","getFirestore","storage","getStorage","getAnalytics","isUsernameExists","_x","_isUsernameExists","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","username","q","querySnapshot","wrap","_context","prev","next","query","collection","where","getDocs","sent","abrupt","stop","_useAuthState","useAuthState","_useAuthState2","_slicedToArray","authUser","authLoading","error","_useState","useState","_useState2","setLoading","_useState3","_useState4","setUser","_fetchData","ref","docSnap","doc","uid","getDoc","data","fetchData","useLogin","_useState5","_useState6","_useState7","_useState8","setError","navigate","useNavigate","_login","_callee2","email","password","_ref$redirectTo","redirectTo","_context2","signInWithEmailAndPassword","t0","message","login","useRegister","_useState9","_useState10","_useState11","_useState12","_register","_callee3","_ref2","_ref2$redirectTo","res","_context3","createUserWithEmailAndPassword","setDoc","avatar","date","Date","now","finish","register","_x2","_useSignOut","useSignOut","_useSignOut2","signOut","_logout","_callee4","_context4","useUser","_useDocumentData","useDocumentData","_useDocumentData2","useUsers","_useCollectionData","useCollectionData","_useCollectionData2","users","_updateAvatar","fileRef","avatarURL","docRef","uploadBytes","getDownloadURL","updateDoc"],"sourceRoot":""}